import{S as O,i as z,s as A,a6 as E,a7 as M,a8 as T,t as g,q as $,aa as w,bc as G,T as H,ai as W,V as C,d as y,e as D,W as S,aT as X,h as d,j as N,f as I,g as P,X as q,k as Y,m as k,l as h,C as B,aj as K,aC as Q,J as R,aB as U,aD as Z,bd as x,B as F,az as ee,Y as J,$ as v}from"../../../chunks/vendor-c539ab3b.js";import{p as te}from"../../../chunks/routing-689f9c1f.js";import{v as oe,J as se}from"../../../chunks/graphql-b763070c.js";import{T as re}from"../../../chunks/Toast-cb4527d6.js";import{g as ne}from"../../../chunks/navigation-d7362a67.js";import{M as ae}from"../../../chunks/ModForm-54a1e43d.js";import{b as ie}from"../../../chunks/paths-396f020f.js";import{M as me}from"../../../chunks/MetaDescriptors-a8cd2896.js";import"../../../chunks/singletons-d19c42e4.js";import"../../../chunks/forms-79c2ff08.js";import"../../../chunks/forms-82642707.js";import"../../../chunks/markdown-e391b8a1.js";import"../../../chunks/extras-7497b851.js";import"../../../chunks/stores-0ab1fd98.js";function L(n){let t,o;return t=new me({props:{description:"Editing mod "+n[1].data.mod.name,title:"Edit mod "+n[1].data.mod.name,image:n[1].data.mod.logo}}),{c(){E(t.$$.fragment)},l(e){M(t.$$.fragment,e)},m(e,s){T(t,e,s),o=!0},p(e,s){const i={};s&2&&(i.description="Editing mod "+e[1].data.mod.name),s&2&&(i.title="Edit mod "+e[1].data.mod.name),s&2&&(i.image=e[1].data.mod.logo),t.$set(i)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){w(t,e)}}}function fe(n){let t,o;return t=new ae({props:{onSubmit:n[5],initialValues:n[3],editing:!0,submitText:"Save"}}),{c(){E(t.$$.fragment)},l(e){M(t.$$.fragment,e)},m(e,s){T(t,e,s),o=!0},p(e,s){const i={};s&8&&(i.initialValues=e[3]),t.$set(i)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){w(t,e)}}}function le(n){let t,o,e=n[1].error.message+"",s;return{c(){t=D("p"),o=S("Oh no... "),s=S(e)},l(i){t=I(i,"P",{});var m=P(t);o=q(m,"Oh no... "),s=q(m,e),m.forEach(d)},m(i,m){h(i,t,m),k(t,o),k(t,s)},p(i,m){m&2&&e!==(e=i[1].error.message+"")&&J(s,e)},i:v,o:v,d(i){i&&d(t)}}}function de(n){let t,o;return{c(){t=D("p"),o=S("Loading...")},l(e){t=I(e,"P",{});var s=P(t);o=q(s,"Loading..."),s.forEach(d)},m(e,s){h(e,t,s),k(t,o)},p:v,i:v,o:v,d(e){e&&d(t)}}}function ce(n){let t,o,e,s;const i=[de,le,fe],m=[];function c(a,u){return a[1].fetching?0:a[1].error?1:2}return t=c(n),o=m[t]=i[t](n),{c(){o.c(),e=C()},l(a){o.l(a),e=C()},m(a,u){m[t].m(a,u),h(a,e,u),s=!0},p(a,u){let p=t;t=c(a),t===p?m[t].p(a,u):(F(),$(m[p],1,1,()=>{m[p]=null}),B(),o=m[t],o?o.p(a,u):(o=m[t]=i[t](a),o.c()),g(o,1),o.m(e.parentNode,e))},i(a){s||(g(o),s=!0)},o(a){$(o),s=!1},d(a){m[t].d(a),a&&d(e)}}}function ue(n){let t,o;return t=new x({props:{$$slots:{default:[ce]},$$scope:{ctx:n}}}),{c(){E(t.$$.fragment)},l(e){M(t.$$.fragment,e)},m(e,s){T(t,e,s),o=!0},p(e,s){const i={};s&522&&(i.$$scope={dirty:s,ctx:e}),t.$set(i)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){w(t,e)}}}function pe(n){let t,o;return{c(){t=D("span"),o=S(n[2])},l(e){t=I(e,"SPAN",{});var s=P(t);o=q(s,n[2]),s.forEach(d)},m(e,s){h(e,t,s),k(t,o)},p(e,s){s&4&&J(o,e[2])},d(e){e&&d(t)}}}function _e(n){let t,o,e,s,i,m,c,a,u,p,f=!n[1].fetching&&!n[1].error&&n[1].data.mod&&L(n);m=new G({props:{$$slots:{default:[ue]},$$scope:{ctx:n}}});function _(r){n[7](r)}let b={$$slots:{default:[pe]},$$scope:{ctx:n}};return n[0]!==void 0&&(b.running=n[0]),a=new re({props:b}),H.push(()=>W(a,"running",_)),{c(){f&&f.c(),t=C(),o=y(),e=D("h1"),s=S("Edit Mod"),i=y(),E(m.$$.fragment),c=y(),E(a.$$.fragment),this.h()},l(r){const l=X('[data-svelte="svelte-mi1wi5"]',document.head);f&&f.l(l),t=C(),l.forEach(d),o=N(r),e=I(r,"H1",{class:!0});var j=P(e);s=q(j,"Edit Mod"),j.forEach(d),i=N(r),M(m.$$.fragment,r),c=N(r),M(a.$$.fragment,r),this.h()},h(){Y(e,"class","text-4xl my-4 font-bold")},m(r,l){f&&f.m(document.head,null),k(document.head,t),h(r,o,l),h(r,e,l),k(e,s),h(r,i,l),T(m,r,l),h(r,c,l),T(a,r,l),p=!0},p(r,[l]){!r[1].fetching&&!r[1].error&&r[1].data.mod?f?(f.p(r,l),l&2&&g(f,1)):(f=L(r),f.c(),g(f,1),f.m(t.parentNode,t)):f&&(F(),$(f,1,1,()=>{f=null}),B());const j={};l&522&&(j.$$scope={dirty:l,ctx:r}),m.$set(j);const V={};l&516&&(V.$$scope={dirty:l,ctx:r}),!u&&l&1&&(u=!0,V.running=r[0],K(()=>u=!1)),a.$set(V)},i(r){p||(g(f),g(m.$$.fragment,r),g(a.$$.fragment,r),p=!0)},o(r){$(f),$(m.$$.fragment,r),$(a.$$.fragment,r),p=!1},d(r){f&&f.d(r),d(t),r&&d(o),r&&d(e),r&&d(i),w(m,r),r&&d(c),w(a,r)}}}const Ie=te();function ge(n,t,o){let e,s,{modId:i}=t,m="",c=!1;const a=Q(oe,{mod:i});R(n,a,_=>o(1,s=_));const u=U({query:se}),p=_=>{u({modId:ee(a).data.mod.id,mod:_}).then(b=>{b.error?(console.error(b.error.message),o(2,m="Error editing mod: "+b.error.message),o(0,c=!0)):ne(ie+"/mod/"+b.data.updateMod.id)})};Z(a);function f(_){c=_,o(0,c)}return n.$$set=_=>{"modId"in _&&o(6,i=_.modId)},n.$$.update=()=>{n.$$.dirty&1&&(c||o(2,m="")),n.$$.dirty&2&&o(3,e=s.data?{...s.data.mod,logo:void 0}:void 0)},[c,s,m,e,a,p,i,f]}class Pe extends O{constructor(t){super();z(this,t,ge,_e,A,{modId:6})}}export{Pe as default,Ie as load};
//# sourceMappingURL=edit.svelte-eea20693.js.map
