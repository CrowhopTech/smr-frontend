{"version":3,"file":"index.svelte-b49b15c0.js","sources":["../../../../../../src/routes/new-guide/index.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { mutation } from '@urql/svelte';\n  import { NewGuideDocument } from '$lib/generated';\n  import Toast from '$lib/components/general/Toast.svelte';\n  import { goto } from '$app/navigation';\n  import GuideForm from '$lib/components/guides/GuideForm.svelte';\n  import type { GuideData } from '$lib/models/guides';\n  import { base } from '$app/paths';\n  import MetaDescriptors from '$lib/components/utils/MetaDescriptors.svelte';\n  import Card, { Content } from '@smui/card';\n\n  let errorMessage = '';\n  let errorToast = false;\n\n  const newGuide = mutation({\n    query: NewGuideDocument\n  });\n\n  const onSubmit = (data: GuideData) => {\n    newGuide({\n      guide: data\n    }).then((value) => {\n      if (value.error) {\n        console.error(value.error.message);\n        errorMessage = 'Error creating guide: ' + value.error.message;\n        errorToast = true;\n      } else {\n        // TODO Toast or something\n        goto(base + '/guide/' + value.data.createGuide.id);\n      }\n    });\n  };\n\n  $: if (!errorToast) errorMessage = '';\n</script>\n\n<svelte:head>\n  <MetaDescriptors description=\"Creating a new guide\" title=\"New guide\" />\n</svelte:head>\n\n<h1 class=\"text-4xl my-4 font-bold\">New Guide</h1>\n\n<Card>\n  <Content>\n    <GuideForm {onSubmit} />\n  </Content>\n</Card>\n\n<Toast bind:running={errorToast}>\n  <span>{errorMessage}</span>\n</Toast>\n"],"names":[],"mappings":"g3CAiDS,8CAAA,2BAAP,iCAAO,yQADY,2BAAA,gGARe,iNAAA,4KAApC,gMAQqB,0PArCf,GAAe,GACf,EAAa,QAEX,GAAW,GACf,MAAO,IAGH,EAAY,IAChB,GACE,MAAO,IACN,KAAM,IACH,EAAM,MACR,SAAQ,MAAM,EAAM,MAAM,aAC1B,EAAe,yBAA2B,EAAM,MAAM,aACtD,EAAa,KAGb,EAAK,EAAO,UAAY,EAAM,KAAK,YAAY,qBAoBlC,iDAfX,QAAY,EAAe"}