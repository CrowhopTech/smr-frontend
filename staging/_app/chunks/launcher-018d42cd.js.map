{"version":3,"file":"launcher-018d42cd.js","sources":["../../../../../src/lib/stores/launcher.ts"],"sourcesContent":["import { get, writable } from 'svelte/store';\nimport { browser } from '$app/env';\nimport { io } from 'socket.io-client';\n\nexport const customProtocolCheck = writable<unknown | null>(null);\nexport const hasLauncher = writable<boolean>(false);\nexport const launcherOpen = writable<boolean>(false);\n\nconst connectToLauncher = () => {\n  new Promise(() => {\n    const ws = io('http://localhost:33642', {\n      transports: ['websocket']\n    });\n\n    ws.on('connect', () => {\n      hasLauncher.set(true);\n      launcherOpen.set(true);\n    });\n\n    ws.on('disconnect', () => {\n      launcherOpen.set(false);\n    });\n  }).catch(console.error);\n};\n\nconst open = (link: string, fallback?: () => void) => {\n  if (browser) {\n    new Promise(() => {\n      get(customProtocolCheck)['protocolCheck'](link, () => {\n        hasLauncher.set(false);\n        if (fallback) {\n          fallback();\n        }\n      });\n    }).catch(console.error);\n  }\n};\n\nconst modLoaderLink = 'https://smm.ficsit.app/';\n\nexport const pingLauncher = () => {\n  open('smmanager://ping', () => {\n    window.open(modLoaderLink, '_blank');\n  });\n};\n\nexport const installMod = (modReference: string) => {\n  open('smmanager://install?modID=' + modReference, () => {\n    window.open(modLoaderLink, '_blank');\n  });\n};\n\nif (browser) {\n  connectToLauncher();\n}\n"],"names":["io"],"mappings":"8DAIa,GAAsB,EAAyB,MAC/C,EAAc,EAAkB,IAChC,EAAe,EAAkB,IAExC,EAAoB,IAAM,IAC1B,SAAQ,IAAM,MACV,GAAKA,EAAG,yBAA0B,CACtC,WAAY,CAAC,iBAGZ,GAAG,UAAW,IAAM,GACT,IAAI,MACH,IAAI,QAGhB,GAAG,aAAc,IAAM,GACX,IAAI,QAElB,MAAM,QAAQ,QAGb,EAAO,CAAC,EAAc,IAA0B,IAE9C,SAAQ,IAAM,GACZ,GAAqB,cAAiB,EAAM,IAAM,GACxC,IAAI,IACZ,WAIL,MAAM,QAAQ,QAIf,EAAgB,0BAET,EAAe,IAAM,GAC3B,mBAAoB,IAAM,QACtB,KAAK,EAAe,aAIlB,EAAa,AAAC,GAAyB,GAC7C,6BAA+B,EAAc,IAAM,QAC/C,KAAK,EAAe"}